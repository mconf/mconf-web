- unless user.disabled
  = div_for user do
    %div{:class => "thread #{cycle('thread-even','thread-odd')}"}
      .logo-in-thread
        = link_logo_image(user, :size => '32', :url => user_path(user), :title => user.name, :class => "logo logo-user")
      .thread-content
        %ul.thread-action-links.visible-on-hover{ :"data-hover-tracked" => "user_#{permission.user_id}" }
          %li= link_to t('private_message.send').downcase, new_user_message_path(:user_id => current_user.to_param, :receiver => user.id), :title => t('private_message.send')
          %li= link_to t('remove').downcase, permission_path(permission), :confirm => t('delete.confirm', :element => user.name), :method => :delete, :title => t('user.delete_from_space')
        .thread-title
          = link_to(sanitize(user.name),user_path(user),:class=>"unified_user")
        .thread-text
          = simple_form_for :permission, :url => permission_path(permission), :html => { :method => :put } do |f|
            .label
              = t('role.one')
            = select :join_request, :role_id, Space.roles.map { |r| [ r.name, r.id ] }, :selected => permission.role_id
            = f.submit t('update'), :class => "btn btn-small"